# vm1
# **æœŸæœ«è€ƒç·´ç¿’VM1ï¼šç³»çµ±è¨­å®šèˆ‡æ“ä½œéƒ¨ä»½**

**é€™å€‹ç³»çµ±é è¨­çš„ root å¯†ç¢¼ç‚º myCentOS8ï¼Œé è¨­çš„ student å¯†ç¢¼ç‚º mystdgoï¼Œæ˜¯å¯ä»¥ç›´æ¥ç™»å…¥çš„ï¼Œç„¡é ˆæ•‘æ´ root å¯†ç¢¼ã€‚ é€™å€‹ç³»çµ±éœ€è¦çš„æ˜¯ä¸€äº›æ­£ç¢ºçš„è¨­å®šï¼Œä»¥ç¬¦åˆç³»çµ±çš„é‹ä½œï¼**

**0. ä¸æ˜¯é¡Œç›®ï¼šè«‹ä½¿ç”¨ vbird_book_setup_ip è¨­å®šå¥½ä½ çš„å­¸è™Ÿè³‡æ–™ã€‚**

---

### **ä¸€ã€ç³»çµ±åˆå§‹åŒ–è¨­å®š**

:::danger
**A. æˆ‘éœ€è¦æ¯æ¬¡é–‹æ©Ÿéƒ½å¯ä»¥é è¨­çš„é€²å…¥ç´”æ–‡å­—ç•Œé¢è€Œéç¾è¡Œçš„åœ–å½¢ç•Œé¢ï¼Œå¯ä»¥ç¯€çœè¨±å¤šä¸å¿…è¦çš„è³‡æºæµªè²»ã€‚**
:::


    â— åœ¨ç³»çµ±è‡ªå·±é–‹æ©Ÿå¾Œï¼Œé è¨­æœƒè·‘é€²ç´”æ–‡å­—ç•Œé¢ï¼Œæ²’æœ‰åœ–å½¢ç•Œé¢çš„æ„æ€ã€‚
    â— ä½ åœ¨æ“ä½œæ™‚ï¼Œä¾èˆŠå¯ä»¥ã€æš«æ™‚ã€åˆ‡æ›åˆ°åœ–å½¢ç•Œé¢ï¼Œæ²’æœ‰ç‰¹åˆ¥è¦æ±‚ä½ ä¸€å®šè¦åœ¨æ–‡å­—ç•Œé¢ç­”é¡Œã€‚
    
### **è§£ç­”**

:::spoiler


    ç¬¬ä¸€æ­¥é©Ÿ 
        systemctl get-default
	    systemctl set-default multi-user.target

**å¦‚æœè¦æš«æ™‚åˆ‡æ›åˆ°åœ–å½¢ä»‹é¢ï¼Œåˆ©ç”¨åº•ä¸‹æŒ‡ä»¤(ä¸å½±éŸ¿ä¸Šè¿°è¨­å®š)**
    
        systemctl isolate graphical.target
        
:::

---

:::danger
**B. è«‹è¨­å®šå¥½é€™éƒ¨ä¸»æ©Ÿçš„ç¶²è·¯åƒæ•¸æˆç‚ºå¦‚ä¸‹ç‹€æ…‹ (å…¨å°æ‰çµ¦åˆ†)ï¼š**
:::


    â— åˆªé™¤åŸæœ‰çš„ç¶²è·¯é€£ç·šåç¨±ï¼Œå»ºç«‹åç‚ºã€ mynetwork ã€çš„é€£ç·šåç¨±ï¼Œä¸”ä½¿ç”¨åˆ°å¯å°å¤–çš„ä¹™å¤ªç¶²è·¯ç•Œé¢ã€‚
    â— éœ€è¦é–‹æ©Ÿå°±è‡ªå‹•å•Ÿå‹•é€™å€‹é€£ç·š
    â— ç¶²è·¯åƒæ•¸çš„è¨­å®šæ–¹å¼ç‚ºæ‰‹å‹•è¨­å®š
    â— ç¶²éš›ç¶²è·¯ä½å€ IP address ç‚ºï¼š 192.168.251.XXX (XXX ç‚ºä¸Šèª²æ™‚ï¼Œè€å¸«çµ¦äºˆçš„è™Ÿç¢¼)
    â— å­ç¶²è·¯é®ç½© netmask ç‚ºï¼š 255.255.255.0
    â— é€šè¨Šé–˜ Gateway ç‚ºï¼š 192.168.251.254
    â— é ˜åŸŸåç¨±ä¼ºæœå™¨ DNS server ä½å€ç‚ºï¼š 172.16.200.254 ä»¥åŠ 120.114.100.1 é€™å…©å€‹
    â— ä¸»æ©Ÿåç¨±ï¼šè«‹è¨­å®šç‚º wwwXXX.book.vbird (å…¶ä¸­ XXX ç‚ºä¸Šèª²æ™‚ï¼Œè€å¸«çµ¦äºˆçš„è™Ÿç¢¼)

### **è§£ç­”**

:::spoiler

    ç¬¬ä¸€æ­¥é©Ÿ åˆªé™¤åŸæœ‰çš„ç¶²è·¯é€£ç·šåç¨±
    
        nmcli connection show (æŸ¥çœ‹ç›®å‰ç¶²å¡æœ‰å“ªäº›)
        nmcli connection delete ens3
    
    ç¬¬äºŒæ­¥é©Ÿ æ–°å¢ç¶²è·¯å¡ (å»ºç«‹åç‚ºã€ mynetwork ã€çš„é€£ç·šåç¨±)
    
        nmcli connection add  con-name mynetwork ifname ens3 type ethernet
        
    ç¬¬ä¸‰æ­¥é©Ÿ è¨­å®šç¶²å¡
    
        nmcli connection modify mynetwork  ipv4.address 192.168.251.XXX/24 \
        ipv4.gateway 192.168.251.254 ipv4.dns 172.16.200.254,120.114.100.1 \
        autoconnect yes ipv4.method manual
        
    ç¬¬å››æ­¥é©Ÿ å•Ÿå‹•è©²ç¶²å¡
    
        nmcli connection up mynetwork
        nmcli connection show (æŸ¥çœ‹ç¶²å¡æ˜¯å¦å•Ÿå‹•æˆåŠŸ)
        nmcli connetcion show mynetwork | grep ipv4(æŸ¥çœ‹ç¶²å¡æ˜¯å¦è¨­å®šæ­£ç¢º)
    
    ç¬¬äº”æ­¥é©Ÿ è¨­å®šä¸»æ©Ÿåç¨±
    
        hostnamectl set-hostname wwwXXX.book.vbird
        hostname
:::

---

:::danger
**C. é‡å° YUM çš„è»Ÿé«”å€‰å„²è¨­å®šï¼Œä½ æœ‰åº•ä¸‹çš„å…©çµ„è»Ÿé«”å€‰å„²ä½å€ï¼Œè«‹è¨­å®šå¥½æ‰€éœ€è¦çš„ç’°å¢ƒ (å…¨å°æ‰çµ¦åˆ†)ï¼š**
:::

    â— http://ftp.ksu.edu.tw/FTP/Linux/CentOS/8/AppStream/x86_64/os/
    â— http://ftp.ksu.edu.tw/FTP/Linux/CentOS/8/BaseOS/x86_64/os/
    
### **è§£ç­”**

:::spoiler

    è‡ªè¡Œè¨­è¨ˆä¸€å€‹å€‰å„²
    vim /etc/yum.repos.d/dic.repo (é è¨­æ˜¯æ²’æœ‰vimçš„å…ˆåˆ©ç”¨vi)
    
    [AppStream]
    name = AppStream
    baseurl = http://ftp.ksu.edu.tw/FTP/Linux/CentOS/8/AppStream/x86_64/os/
    gpgcheck = 0
    enabled = 1
    
    [BaseOS]
    name = BaseOS
    baseurl = http://ftp.ksu.edu.tw/FTP/Linux/CentOS/8/BaseOS/x86_64/os/
    gpgcheck = 0
    enabled = 1
**å®Œæˆå¾Œå­˜æª”é›¢é–‹**

    
:::

---

:::danger
**D. æ™‚å€èˆ‡æ™‚é–“åŠç¶²è·¯æ ¡æ™‚åŠŸèƒ½è¨­è¨ˆ**
:::

    â— ä½ ç³»çµ±çš„æ™‚é–“å¥½åƒæ€ªæ€ªçš„ï¼Œæ™‚å€èˆ‡æ™‚é–“å¥½åƒéƒ½éŒ¯äº‚äº†ï¼è«‹æ”¹å›å°åŒ—çš„æ™‚å€èˆ‡æ™‚é–“ã€‚
    â— è«‹ä½¿ç”¨ç¶²è·¯æ ¡æ™‚ (chronyd) çš„æ–¹å¼ï¼Œä½¿ç”¨è²´æ ¡ ntp.ksu.edu.tw ä½œç‚ºä¼ºæœå™¨ï¼Œä¸»å‹•æ›´æ–°ä½ çš„ç³»çµ±æ™‚é–“ã€‚ ä¸”ç³»çµ±å•Ÿå‹•ä¹‹å¾Œï¼ŒæœƒæŒçºŒç¶²è·¯æ ¡æ™‚ä»¥å–å¾—æœ€æ­£ç¢ºçš„æ™‚é–“ã€‚(è‹¥è²´æ ¡ä¸¦ç„¡ NTP ä¼ºæœå™¨ï¼Œå‰‡ä»¥ time.stdtime.gov.tw ä½œç‚ºä¾†æº)
    
### **è§£ç­”**

:::spoiler

    ç¬¬ä¸€æ­¥é©Ÿ æ”¹å›å°åŒ—çš„æ™‚å€èˆ‡æ™‚é–“
    
        timedatectl set-timezone Asia/Taipei æ›´æ”¹å°åŒ—æ™‚å€æ™‚é–“
        timedatectl æŸ¥çœ‹æ˜¯å¦æ›´æ”¹æ­£ç¢º
        
    ç¬¬äºŒæ­¥é©Ÿ ç¶²è·¯æ ¡æ™‚ (chronyd) çš„æ–¹å¼ï¼Œä½¿ç”¨è²´æ ¡ ntp.ksu.edu.tw ä½œç‚ºä¼ºæœå™¨
    
        systemctl status chronyd (å…ˆæŸ¥çœ‹é€™ç³»çµ±æœ‰æ²’æœ‰é€™å€‹æœå‹™)
        yum install -y chrony (æ²’æœ‰å°±å®‰è£)
        systemctl start chronyd (å•Ÿå‹•)
        systemctl enable chronyd (é–‹æ©Ÿå•Ÿå‹•)
        systemctl status chronyd (è§€å¯Ÿ)
        vim /etc/chrony.conf (é€²å…¥ç¶²è·¯æ ¡æ™‚åŠŸèƒ½)
        å…ˆå°‡é è¨­çš„pool.....è¨»è§£
        server ntp.ksu.edu.tw iburst (è¨­å®šé¡Œç›®éœ€è¦çš„ä¼ºæœå™¨)
        å­˜æª”é›¢é–‹:wq
        chronyc sources (å¦‚æœæ²’æœ‰æ›´æ–°åˆ°è¨­å®šæª”ç­‰å¾…å€‹å¹¾ç§’åœ¨åŸ·è¡Œä¸€æ¬¡è©²æŒ‡ä»¤å³å¯)

:::

---

:::danger
**E. ç³»çµ±çš„è‡ªå‹•æ›´æ–°æ©Ÿåˆ¶ï¼š**
:::

    i. è«‹è‡³å°‘å‡ç´šæ ¸å¿ƒ (kernel) åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œä¸”å‡ç´šå®Œç•¢å¾Œï¼Œéœ€è¦é‡æ–°é–‹æ©Ÿç‚ºå®œ
    ii. é€™éƒ¨ä¸»æ©Ÿéœ€è¦ä½œç‚ºæœªä¾†é–‹ç™¼è»Ÿé«”ä¹‹ç”¨ï¼Œå› æ­¤éœ€è¦å®‰è£ä¸€å€‹ã€ RPM é–‹ç™¼å·¥å…· ã€çš„è»Ÿé«”ç¾¤çµ„ï¼Œè«‹å®‰è£ä»–ã€‚
    iii. è«‹è¨­å®šæ¯å¤©å‡Œæ™¨ 3 é»è‡ªå‹•èƒŒæ™¯é€²è¡Œå…¨ç³»çµ±æ›´æ–°ã€‚
    
### **è§£ç­”**

:::spoiler

    ç¬¬ä¸€æ­¥é©Ÿ å‡ç´šæ ¸å¿ƒ (kernel) åˆ°æœ€æ–°ç‰ˆæœ¬
    
        yum update kernel -y
        reboot
        uname -r (æŸ¥çœ‹ç›®å‰ç‰ˆæœ¬æ ¸å¿ƒ)
        
    ç¬¬äºŒæ­¥é©Ÿ å®‰è£RPM é–‹ç™¼å·¥å…·
    
        yum -y groupinstall "RPM Development Tools"
        
    ç¬¬ä¸‰æ­¥é©Ÿ è¨­å®šæ¯å¤©å‡Œæ™¨ 3 é»è‡ªå‹•èƒŒæ™¯é€²è¡Œå…¨ç³»çµ±æ›´æ–°
    
        vim /etc/crontab
        0  3  *  * *  root  yum -y update
        åˆ† æ™‚ æ—¥ æœˆ å‘¨ ä½¿ç”¨è€… æŒ‡ä»¤
::: 
    
---

### **äºŒã€ å¸³è™Ÿèˆ‡æ¬Šé™æ§ç®¡æ–¹é¢çš„å•é¡Œï¼ŒåŒ…æ‹¬æ–°å»ºå¸³è™Ÿã€å¸³è™Ÿç›¸é—œæ¬Šé™è¨­å®šç­‰**

:::info
**A. ç®¡ç†å“¡çš„ä¸€èˆ¬å¸³è™Ÿè¨­å®šï¼š**
:::

    â— è«‹è®“ student å¯ä»¥é †åˆ©ä½¿ç”¨è‡ªå·±çš„å¯†ç¢¼æ“ä½œ sudo æŒ‡ä»¤
    
### **è§£ç­”**

:::spoiler

    ç¬¬ä¸€å€‹æ­¥é©Ÿ
    
        visudo
        /root æœå°‹æŒ‰ä¸‹[n] ä¸‰æ¬¡
        æœƒçœ‹åˆ°æœ‰ä¸€å€‹root ALL=(ALL) ALL
        åœ¨é€™åº•ä¸‹åŠ å…¥
        student ALL=(ALL) ALL
        :wqå­˜æª”é›¢é–‹
        
::: 

---

:::info
**B. å¸³è™Ÿé–å®šåŠŸèƒ½ï¼š**
:::

    â— æœ‰å€‹åç‚º alex çš„å¸³è™Ÿï¼Œä»–çš„å¯†ç¢¼ç‚º mygodhehe ï¼Œé€™å€‹å¸³è™Ÿæœ‰é»æ€ªç•°ï¼Œå› æ­¤èº«ç‚ºç®¡ç†å“¡çš„ä½ ï¼Œå¾—è¦å°‡è©²å¸³è™Ÿæš«æ™‚é–å®šã€‚
    â— æ„æ€æ˜¯èªªï¼Œé€™å€‹å¸³è™Ÿçš„æ‰€æœ‰è³‡æºéƒ½ä¸è®Šï¼Œä½†æ˜¯è©²å¸³è™Ÿç„¡æ³•é †åˆ©ä½¿ç”¨å¯†ç¢¼ç™»å…¥çš„æ„æ€(å¯†ç¢¼é–å®š)
    
### **è§£ç­”**

:::spoiler

    ç¬¬ä¸€æ­¥é©Ÿ æš«æ™‚é–å®šè©²å¸³è™Ÿ

        passwd -l alex
        
    ç¬¬äºŒæ­¥é©Ÿ æŸ¥çœ‹alexæ˜¯å¦é–å®šè©²å¸³è™Ÿäº†
        
        cat /etc/shadow | grep alex
        çœ‹åˆ°æœ€å‰é¢æœ‰å‡ºç¾!å°±ä»£è¡¨å°äº†
        
:::

---

:::info
**C. ç‰¹æ®Šç³»çµ±å¸³è™Ÿå»ºç½®ï¼šå»ºç«‹ä¸€å€‹åç‚º mysys1 çš„ç³»çµ±å¸³è™Ÿï¼Œä¸”é€™å€‹ç³»çµ±å¸³è™Ÿï¼š**
:::

    â— ä¸éœ€è¦å®¶ç›®éŒ„
    â— ä¸å…·å‚™å¯äº’å‹•çš„ shell
    â— ä¸éœ€è¦å¯†ç¢¼
    
### **è§£ç­”**

:::spoiler

    ç¬¬ä¸€æ­¥é©Ÿ 
        
        useradd -u 976 -r -M -s /sbin/nologin mysys1

:::

---

:::info
**D. é è¨­å¸³è™Ÿçš„æ¬Šé™å±¬æ€§è¨­å®šï¼š**
:::

    â— å»ºç«‹æ–°ç”¨æˆ¶æ™‚ï¼Œæ–°ç”¨æˆ¶çš„å®¶ç›®éŒ„æ‡‰è©²éƒ½æœƒå‡ºç¾ä¸€å€‹åç‚º newhtml çš„å­ç›®éŒ„å­˜åœ¨
    â— æ–°å¸³è™Ÿç™»å…¥æ™‚ï¼Œé è¨­å°‡æœƒæœ‰åº•ä¸‹
        ã€ rm='rm -i' ã€ã€ cp='cp -i' ã€ã€ mv='mv -i' ã€é€™ä¸‰å€‹å‘½ä»¤åˆ¥åå­˜åœ¨ã€‚
    
### **è§£ç­”**

:::spoiler

    ç¬¬ä¸€æ­¥é©Ÿ æ–°ç”¨æˆ¶çš„å®¶ç›®éŒ„æ‡‰è©²éƒ½æœƒå‡ºç¾ä¸€å€‹åç‚º newhtml çš„å­ç›®éŒ„
        
        cd /etc/skel
        mkdir newhtml
    
    ç¬¬äºŒæ­¥é©Ÿ æ–°å¸³è™Ÿç™»å…¥ é è¨­å°‡æœƒã€ rm='rm -i' ã€ã€ cp='cp -i' ã€ã€ mv='mv -i' ã€é€™ä¸‰å€‹å‘½ä»¤åˆ¥å
    
        vim /etc/skel/.bashrc
        alias rm='rm -i'
        alias cp='cp -i'
        alias mv='mv -i'
        [esc] :wqå­˜æª”é›¢é–‹
:::

---

:::info
**E. ç‰¹æ®Šå¸³è™Ÿç®¡ç†çš„éœ€æ±‚ï¼š**
:::

    â— è®“ /home é€™å€‹ç›®éŒ„æ”¯æ´ä½¿ç”¨è€…èˆ‡ç¾¤çµ„çš„ Quota ç£ç¢Ÿé…é¡åŠŸèƒ½
    â— å¢åŠ ä¸€å€‹åç‚º examgroup çš„ç¾¤çµ„
    
### **è§£ç­”**

:::spoiler

    ç¬¬ä¸€æ­¥é©Ÿ è®“ /home é€™å€‹ç›®éŒ„æ”¯æ´ä½¿ç”¨è€…èˆ‡ç¾¤çµ„çš„ Quota ç£ç¢Ÿé…é¡

        vim /etc/fstab
        åœ¨homeå¾Œé¢åƒæ•¸defaultsåŠ å…¥,usrquota,grpquota
        :wq
        ç™»å‡º
        æ‰“é–‹tty2
	    ç™»å…¥root
	    umount /dev/mapper/centos-home
	    mount -a
	    df
	    mount | grep /home
	    exit æˆ– [ctrl]+ [D]
        
    ç¬¬äºŒæ­¥é©Ÿ å¢åŠ ä¸€å€‹åç‚º examgroup çš„ç¾¤çµ„
    
        groupadd examgroup
        cat /etc/group | grep examgroup
:::

:::info
**F. ç‰¹æ®Šå¸³è™Ÿå»ºç«‹çš„éœ€æ±‚ï¼šè«‹å¯«ä¸€éš»åç‚º /root/users/addusers.sh çš„è…³æœ¬ï¼Œé€™å€‹è…³æœ¬å°‡ç”¨ä¾†è™•ç†ç‰¹æ®Šå¸³è™Ÿçš„å»ºç½®ã€‚ ä½ æ‡‰è©²ä½¿ç”¨ forâ€¦doâ€¦done è¿´åœˆçš„æ–¹å¼ä¾†å»ºç«‹é€™éš»è…³æœ¬ï¼Œè€Œ for è¿´åœˆå…§çš„ç¨‹å¼ç¢¼ï¼Œè«‹ä¾åºä½¿ç”¨å¦‚ä¸‹çš„æ–¹å¼ä¾†å»ºç½®å¦¥ç•¶ï¼š**
:::

    i. å»ºç«‹å¸³è™Ÿæ™‚çš„ç›¸é—œåƒæ•¸è¨­è¨ˆï¼š
        â— å¸³è™Ÿåç¨±ç‚ºï¼š examuser11 ~ examuser30 å…± 20 å€‹å¸³è™Ÿ
        â— å»ºç«‹å¸³è™Ÿæ™‚ï¼Œæ¯å€‹å¸³è™Ÿéƒ½è¦åŠ å…¥ä¸€å€‹åç‚º examgroup çš„æ¬¡è¦ç¾¤çµ„æ”¯æ´
        â— æ¯å€‹å¸³è™Ÿçš„å…¨åèªªæ˜å°±æ˜¯è©²å¸³è™Ÿçš„åç¨±
    
    ii. æ¯å€‹å¸³è™Ÿçš„å¯†ç¢¼å‡ç‚º myPassWord
    iii. ä¸¦ä¸”æ¯å€‹å¸³è™Ÿé¦–æ¬¡ç™»å…¥ç³»çµ±æ™‚ï¼Œéƒ½æœƒè¢«å¼·è¿«è¦æ±‚æ›´æ”¹å¯†ç¢¼ (chage ??)
    iv. æ¯å€‹å¸³è™Ÿåœ¨ /home çš„ Quota ç‚º soft --> 120MB, hard --> 150MB
    v. ä¿®æ”¹æ¯ä½å¸³è™Ÿå®¶ç›®éŒ„ (ä¾‹å¦‚ examuser11 å®¶ç›®éŒ„åœ¨ /home/examuser11/ ) çš„æ¬Šé™æˆç‚º drwx--x--x çš„æ¨¡æ¨£
    vi. è…³æœ¬å»ºç½®å®Œç•¢å¾Œï¼Œè«‹å‹™å¿…åŸ·è¡Œä¸€æ¬¡ï¼Œä»¥ç¢ºå®šå¸³è™Ÿå¯ä»¥é †åˆ©è¢«å»ºç«‹ï¼
    
### **è§£ç­”**

:::spoiler



    ç¬¬ä¸€æ­¥é©Ÿ å»ºç«‹ç›®éŒ„
    
        mkdir /root/users
        
    ç¬¬äºŒæ­¥é©Ÿ æ’°å¯«è…³æœ¬
    
        vim /root/users/addusers.sh

    ç¬¬ä¸‰æ­¥é©Ÿ è…³æœ¬å…§å®¹
    
        #!/bin/bash
                
        for users in $(seq  11 30)
        do
	        username="examuser${users}"
	        useradd -G examgroup ${username}
            echo myPassWord | passwd --stdin ${username}
            chage -d 0 ${username} 
            xfs_quota -x -c "limit -u bsoft=120M bhard=150M ${username}" /home


            chmod 711 /home/${username}
	    done

    ç¬¬å››æ­¥é©Ÿ å°‡è…³æœ¬èƒ½è®“ä»»ä½•äººéƒ½æœ‰xæ¬Šé™
    
        chmod a+x /root/users/addusers.sh
        sh /root/users/addusers.sh

    ----------------------------------

	æ¸¬è©¦æ–¹æ³•1 (è¦å…ˆåŸ·è¡Œå®Œæˆè…³æœ¬æ‰èƒ½æ¸¬è©¦å“¦~~)
	exit
	åˆ‡æ›æˆstudent
	su - examuser11
	å°±æ›çœ‹åˆ°çµ‚ç«¯æ©Ÿè¦ä½ æ›´æ”¹å¯†ç¢¼

    æ¸¬è©¦æ–¹æ³•2 (è¦å…ˆåŸ·è¡Œå®Œæˆè…³æœ¬æ‰èƒ½æ¸¬è©¦å“¦~~)
    xfs_quota -x -c "report -ubin" /home (çœ‹ç¬¬ä¸€å€‹è¡¨æ ¼userå“¦)

:::

---

:::info
**G. ç¾¤çµ„å…±ç”¨ç›®éŒ„çš„åŠŸèƒ½ï¼šè«‹å»ºç«‹ä¸€å€‹åç‚º /data/myexam çš„ç›®éŒ„ï¼Œé€™å€‹ç›®éŒ„çš„æ¬Šé™è¨­å®šæ˜¯é€™æ¨£çš„ï¼š**
:::

    i. é—œæ–¼ examgroup ç¾¤çµ„å…§çš„ç”¨æˆ¶æ¬Šé™ï¼š
       â— è©²ç›®éŒ„å¯ä»¥è®“ examgroup çš„ç”¨æˆ¶å…·æœ‰å®Œæ•´çš„æ¬Šé™
       â— è€Œå…¶ä»–äººä¸å…·å‚™ä»»ä½•æ¬Šé™
       â— åœ¨è©²ç›®éŒ„åº•ä¸‹æ–°å»ºçš„è³‡æ–™(ä¸è«–æª”æ¡ˆé‚„æ˜¯ç›®éŒ„)ï¼Œæ–°è³‡æ–™çš„æ“æœ‰ç¾¤çµ„éƒ½æœƒæ˜¯ examgroup
       
    ii. é—œæ–¼ examuser30 èˆ‡ student é€™å…©å€‹å¸³è™Ÿçš„ç‰¹å®šè¦æ±‚ï¼š
       â— å› ç‚º examuser30 å¸³è™Ÿè¢«ç›œï¼Œå› æ­¤ examuser30 é‡å° /data/myexam è¨­å®šç‚ºä¸å…·å‚™ä»»ä½•æ¬Šé™
       â— å› ç‚º student æ˜¯ç®¡ç†å“¡çš„ä¸€èˆ¬å¸³è™Ÿï¼Œè©²å¸³è™Ÿä¹Ÿéœ€è¦æŸ¥è©¢ /data/myexam ç›®éŒ„ä¸‹çš„è³‡è¨Šã€‚
          ğ“‡½ è«‹è®“ student å¯ä»¥è®€ã€é€²å…¥è©²ç›®éŒ„ï¼Œä½†ä¸å¯ä»¥å¯«å…¥è©²ç›®éŒ„ã€‚
          ğ“‡½ æœªä¾†åœ¨æ­¤ç›®éŒ„åº•ä¸‹æ–°å»ºçš„ä»»ä½•è³‡æ–™ï¼Œé è¨­ student éƒ½å…·æœ‰è®€èˆ‡é€²å…¥ç›®éŒ„çš„æ¬Šé™(æ²’æœ‰å¯«å…¥çš„æ¬Šé™å–”ï¼)ã€‚
          
### **è§£ç­”**

:::spoiler

    ç¬¬ä¸€æ­¥é©Ÿ å»ºç«‹ç›®éŒ„
    
        mkdir /data
        mkdir /data/myexam
        
    ç¬¬äºŒæ­¥é©Ÿ é—œæ–¼ examgroup ç¾¤çµ„å…§çš„ç”¨æˆ¶æ¬Šé™
    
        chgrp examgroup /data/myexam
	    chmod 2770 /data/myexam
	    ll /data/ (æŸ¥çœ‹æ¬Šé™æ˜¯å¦ç‚º2770)
    
    ç¬¬ä¸‰æ­¥é©Ÿ é—œæ–¼ examuser30 èˆ‡ student é€™å…©å€‹å¸³è™Ÿçš„ç‰¹å®šè¦æ±‚
    
        setfacl -m u:examuser30:- /data/myexam/
	    getfacl /data/myexam
        
        su - examuser30
	    ll /data/myexam/
	(ä½ æœƒç™¼ç¾åˆ°ä»–æœƒé¡¯ç¤ºPermission deniedä»£è¡¨ä½ æ²’æ¬Šé™)
    
        setfacl -m u:student:rx /data/myexam
	    getfacl /data/myexam
    
:::

---

### **ä¸‰ã€ç³»çµ±åŸºæœ¬æ“ä½œï¼ŒåŒ…æ‹¬ç³»çµ±å‚™ä»½ã€è‡ªå‹•åŒ–è…³æœ¬ã€æ™‚é–“è‡ªå‹•æ›´æ–°ç­‰æ©Ÿåˆ¶**

:::danger
**A. å°‹æ‰¾ç‰¹æ®Šæ¬Šé™çš„æª”åè³‡æ–™ï¼š**
:::

    â— æ‰¾å‡ºåœ¨/usr/bin, /usr/sbin ç›®éŒ„ä¸‹ï¼Œå…·æœ‰ s æˆ– t ç­‰ç‰¹æ®Šæ¬Šé™çš„æª”å (SUID/SGID/SBIT)
    â— å°‡é€™äº›æª”åé€£åŒæ¬Šé™ï¼Œä»¥é¡ä¼¼ ll è¼¸å‡ºçš„è³‡è¨Šï¼Œå°‡è¨Šæ¯è¼¸å‡ºåˆ° /data/findperm.txt æª”æ¡ˆä¸­
    
### **è§£ç­”**

:::spoiler

    ç¬¬ä¸€æ­¥é©Ÿ å…ˆå°‹æ‰¾æœ‰sæˆ–tçš„ç‰¹æ®Šæ¬Šé™çš„æª”æ¡ˆ
    
        find /usr/bin /usr/sbin -perm /7000	(æŸ¥è©¢æœ‰sæˆ–tçš„ç‰¹æ®Šæ¬Šé™æª”å)
        find /usr/bin /usr/sbin -perm /7000 | wc -l (æŸ¥è©¢æœ‰sæˆ–tçš„ç‰¹æ®Šæ¬Šé™æœ‰å¹¾ç­†)

    ç¬¬äºŒæ­¥é©Ÿ å°‡é€™äº›è¼¸å‡ºåˆ°/data/findperm.txt
        
        ll -a $(find /usr/bin /usr/sbin -perm /7000) > /data/findperm.txt
    
    ç¬¬ä¸‰æ­¥é©Ÿ æŸ¥çœ‹è©²æª”æ¡ˆç­†æ•¸æ˜¯å¦ä¸€æ¨£ä¸”æ ¼å¼æ˜¯é¡Œç›®è¦æ±‚çš„
    
        cat /data/findperm.txt (æŸ¥çœ‹æ ¼å¼)
        cat /data/findperm.txt | wc -l (æŸ¥çœ‹ç­†æ•¸)

:::

---

:::danger
**B. æ‰¾å°‹ IP åƒæ•¸è¼¸å‡ºï¼š**
:::

    â— ä½¿ç”¨ã€ ip addr show ã€é€™å€‹æŒ‡ä»¤ï¼Œå°‡è¼¸å‡ºè¨Šæ¯ä¸­ï¼Œå«æœ‰ inet é—œéµå­—çš„ï¼Œä½†ä¸èƒ½å«æœ‰ inet6 é—œéµå­—ï¼Œä¸€æ•´åˆ—è¼¸å‡º
    â— å°‡ä¸Šè¿°çš„çµæœè½‰è¼¸å‡ºåˆ° /data/mynetwork.txt æª”æ¡ˆä¸­ã€‚
    
### **è§£ç­”**

:::spoiler

    ç¬¬ä¸€æ­¥é©Ÿ å…ˆåœ¨çµ‚ç«¯æ©Ÿè¼¸å…¥æŒ‡ä»¤æŸ¥è©¢
        
        ip addr show | grep 'inetç©ºæ ¼'
        
    ç¬¬äºŒæ­¥é©Ÿ å°‡è¼¸å‡ºçš„å€¼å‚³é€çµ¦æŒ‡å®šçš„æª”æ¡ˆ
        
        ip addr show | grep 'inetç©ºæ ¼' >  /data/mynetwork.txt
        
    ç¬¬ä¸‰æ­¥é©Ÿ æŸ¥çœ‹è©²æª”æ¡ˆ
    
        cat /data/mynetwork.txt
:::

---

:::danger
**C. ç³»çµ±å‚™ä»½è…³æœ¬è£½ä½œï¼šç”±æ–¼ç³»çµ±ä¸Šé¢æœ‰éå¸¸å¤šçš„é‡è¦è³‡æ–™å¿…é ˆè¦é€²è¡Œå‚™ä»½ï¼Œå› æ­¤æˆ‘å€‘æƒ³è¦ä½¿ç”¨ä¸€æ”¯ script ä¾†é€²è¡Œå‚™ä»½çš„å‹•ä½œï¼Œä¸”å°‡è©² script å®šæ™‚åŸ·è¡Œï¼š**
:::

    i. è«‹æ’°å¯«ä¸€éš»åç‚º /root/backup_system.sh çš„è…³æœ¬ï¼Œä¾†é€²è¡Œå‚™ä»½çš„å·¥ä½œ
    ii. éœ€è¦å‚™ä»½çš„ç›®éŒ„æœ‰ï¼š/etc, /home, /var/spool/mail/, /var/spool/cron/, /var/spool/at/, /var/lib/ï¼Œè…³æœ¬çš„å…§å®¹ç‚ºï¼š
        â— ç¬¬ä¸€è¡Œä¸€å®šè¦å®£å‘Š shell å–”ï¼
        â— è‡ªå‹•åˆ¤æ–· /backups ç›®éŒ„æ˜¯å¦å­˜åœ¨ï¼Œè‹¥ä¸å­˜åœ¨å‰‡ mkdir å»ºç«‹å¥¹ï¼Œè‹¥å­˜åœ¨å‰‡ä¸é€²è¡Œä»»ä½•å‹•ä½œ
        â— è¨­è¨ˆä¸€å€‹åç‚º mysource çš„è®Šæ•¸ï¼Œè®Šæ•¸å…§å®¹ä»¥ç©ºæ ¼éš”é–‹æ‰€éœ€è¦å‚™ä»½çš„ç›®éŒ„
        â— è¨­è¨ˆä¸€å€‹åç‚º mytarget çš„è®Šæ•¸ï¼Œè©²è®Šæ•¸ç‚º tar æ‰€å»ºç«‹çš„æª”åï¼Œæª”åå‘½åè¦å‰‡ /backups/mysys_20xx_xx_xx.tar.gz ï¼Œ å…¶ä¸­ 20xx_xx_xx ç‚ºè¥¿å…ƒå¹´ã€æœˆã€æ—¥çš„æ•¸å­—ï¼Œè©²æ•¸å­—ä¾æ“šä½ å‚™ä»½ç•¶å¤©çš„æ—¥æœŸç”± date è‡ªè¡Œå–å¾—ã€‚
        â— é–‹å§‹åˆ©ç”¨ tar ä¾†å‚™ä»½
    iii. è«‹æ³¨æ„ï¼Œæ’°å¯«å®Œç•¢ä¹‹å¾Œï¼Œä¸€å®šè¦ç«‹åˆ»åŸ·è¡Œä¸€æ¬¡è©²è…³æœ¬ï¼ç¢ºèªå¯¦éš›æœ‰å»ºç«‹ /backups ä»¥åŠç›¸é—œçš„å‚™ä»½è³‡æ–™å–”ï¼
    
### **è§£ç­”**

:::spoiler

    ç¬¬ä¸€æ­¥é©Ÿ ç·¨è¼¯è…³æœ¬
    
    vim /root/backup_system.sh
        
    ç¬¬äºŒæ­¥é©Ÿ æ’°å¯«è…³æœ¬
    
        #!/bin/bash
        
        [ ! -d /backups ] && mkdir /backups
        
        mysource="etc /home /var/spool/mail/ /var/spool/cron/ \
        /var/spool/at/ /var/lib/"

        mytarget="/backups/mysys_$( date +%Y_%m_%d ).tar.gz"

        tar -zc -f $mytarget $mysource
        
    ç¬¬ä¸‰æ­¥é©Ÿ å°‡è…³æœ¬èƒ½è®“ä»»ä½•äººéƒ½æœ‰xæ¬Šé™

        chmod a+x /root/backup_system.sh
        sh /root/backup_system.sh

    ç¬¬å››æ­¥é©Ÿ æŸ¥çœ‹æ˜¯å¦æœ‰gzæª”

        ll /backups

:::

---

:::danger
**D. å®šæœŸå‚™ä»½åŠŸèƒ½ï¼šæ’å®šä¸Šè¿°çš„å‚™ä»½æŒ‡ä»¤åœ¨æ¯å€‹æ˜ŸæœŸ 6 çš„å‡Œæ™¨ 2 é»é€²è¡Œé€™å€‹å‚™ä»½çš„å‹•ä½œï¼Œä¸”é€™å€‹scriptåœ¨åŸ·è¡Œçš„æ™‚å€™ï¼š**
:::

    â— å‚™ä»½æŒ‡ä»¤åŸ·è¡Œçš„éç¨‹è«‹ä½¿ç”¨è³‡æ–™æµé‡å°å‘å°‡éç¨‹å®Œæ•´çš„å„²å­˜åœ¨ /backups/backup.log é€™å€‹æª”æ¡ˆä¸­(åŒ…æ‹¬æ­£ç¢ºèˆ‡éŒ¯èª¤è³‡è¨Š)
    â— ä½¿ç”¨ NIå€¼ 10 ä¾†åŸ·è¡Œæ­¤æŒ‡ä»¤ã€‚
    
### **è§£ç­”**

:::spoiler


    ç¬¬ä¸€æ­¥é©Ÿ ç·¨è¼¯å·¥ä½œæ’ç¨‹
    
        vim /etc/crontab
    
    ç¬¬äºŒæ­¥é©Ÿ æ’°å¯«å·¥ä½œæ’ç¨‹
    
    0  2  *  *  6  root  /bin/nice -n 10 /root/backup_system.sh &> /backups/backup.log
   
      :wqå­˜æª”é›¢é–‹
   
:::

---

:::danger
**E. æˆ‘çš„ /usr/sbin/setquota é€™å€‹æª”æ¡ˆä¸å°å¿ƒåˆªé™¤äº†ï¼Œè©²å¦‚ä½•æ•‘å›ä¾†ï¼Ÿ(å¯ä»¥ä½¿ç”¨ rpm å»è¿½è¹¤æ˜¯å“ªå€‹è»Ÿé«”æä¾›çš„æª”æ¡ˆå¾Œï¼Œç§»é™¤å†å®‰è£è©²è»Ÿé«”å³å¯å®Œæˆæ­¤é¡Œç›®ã€‚)ï¼š**
:::

### **è§£ç­”**

:::spoiler

    ç¬¬ä¸€æ­¥é©Ÿ
    
        ll /usr/sbin/setquota (æ‡‰è©²æ˜¯æ²’æœ‰æ‰å°)
    
    ç¬¬äºŒæ­¥é©Ÿ å…ˆç§»é™¤è©²è»Ÿä»¶
        
        rpm -qf /usr/sbin/setquota (æŸ¥è©¢è©²è»Ÿä»¶åç¨±)
        yum -y remove  quota -4.04-10.el8.x86_64 (ç§»é™¤è©²è»Ÿä»¶)
        
    ç¬¬ä¸‰æ­¥é©Ÿ å®‰è£è©²è»Ÿä»¶
        
        yum -y install  quota-4.04-10.el8.x86_64
        
    ç¬¬å››æ­¥é©Ÿ æŸ¥çœ‹ç›®éŒ„æ˜¯å¦å­˜åœ¨äº†
    
        ll /usr/sbin/setquota

:::

---

:::danger
**F. æœå‹™çš„ç®¡ç†éƒ¨ä»½ï¼Œä»¥ httpd ç‚ºä¾‹ï¼š**
:::

    â— è®“ä½ çš„ Linux æˆç‚º http ä»¥åŠ https æ”¯æ´å…©è€…çš„ç¶²é ä¼ºæœå™¨
    â— æ¯æ¬¡é–‹æ©Ÿéƒ½æœƒä¸»å‹•çš„å–šé†’é€™å€‹ä¼ºæœå™¨åŠŸèƒ½
    â— Internet æ‡‰è©²è¦èƒ½å¤ é€£ç·šåˆ°ä½ çš„ http ä»¥åŠ https åŸ å£æœå‹™
    â— ç•¶è¼¸å…¥ http://localhost æ™‚ï¼Œå¯ä»¥çœ‹åˆ°çš„æ˜¯ä½ çš„ (1)å§“åèˆ‡ (2)å­¸è™Ÿ
    â— æ³¨æ„ï¼šä¸Šèª²æåˆ°çš„æœå‹™å»ºç½®äº”å€‹æ­¥é©Ÿï¼

### **è§£ç­”**


:::spoiler

    ç¬¬ä¸€æ­¥é©Ÿ æœå‹™å»ºç½®äº”å€‹æ­¥é©Ÿ
        
        yum install httpd
        firewall-cmd --add-service=http
        firewall-cmd --add-service=http --permanent
        systemctl start httpd
        systemctl enable httpd
        systemctl status httpd
        firewall-cmd --list-all
    
    ç¬¬äºŒæ­¥é©Ÿ æ’°å¯«é¦–é çš„htmlæª”
    
        cd /var/www/html
        vim index.html
        å¯«å…¥å§“å</br>
        å­¸è™Ÿ
        :wq
        
    ç¬¬ä¸‰æ­¥é©Ÿ
    
	    é–‹ç¶²é æœå°‹http://localhostå¦‚æœæœ‰å­¸è™Ÿå§“åå°±æˆåŠŸ
        
        æˆ–è€…ç”¨æŒ‡ä»¤è¼¸å…¥ curl  localhost
::: 

---

### **å››ã€è…³æœ¬å»ºç«‹èˆ‡ç³»çµ±ç®¡ç†**

:::info
**A. ç‰¹æ®ŠåŸå› ï¼Œä¾‹å¦‚é›»åŠ›å›ºå®šç¶­è­·çš„é—œæ©Ÿæƒ…å¢ƒå•é¡Œï¼š**
:::

    â— ä½ çš„ç³»çµ±å°‡åœ¨ 7 æœˆçš„ 20 è™Ÿ 08:00 é€²è¡Œé—œæ©Ÿçš„æ­²ä¿®å·¥ä½œï¼Œè«‹ä»¥ã€å–®æ¬¡ã€å·¥ä½œæ’ç¨‹ä¾†è¨­è¨ˆé—œæ©Ÿçš„å‹•ä½œ (poweroff)
    
### **è§£ç­”**

:::spoiler

    ç¬¬ä¸€æ­¥é©Ÿ
    
        at  08:00 2021-07-20 (å–®æ¬¡æ ¼å¼ç‚ºat HH:MM YYYY-MM-DD)æ™‚:åˆ† è¥¿å…ƒå¹´-æœˆ-æ—¥
        at> poweroff é—œæ©ŸæŒ‡ä»¤
        at> [ctrl+d] çµæŸè¨­å®šæŒ‡ä»¤
    
    ç¬¬äºŒæ­¥é©Ÿ
    
        atqæŸ¥è©¢æ˜¯å¦å»ºç«‹æˆåŠŸ
	    åšéŒ¯å¯ä»¥ç”¨atrm ç·¨è™Ÿæ•¸å­—åˆªé™¤
        
        èˆ‰ä¾‹ åˆ©ç”¨atqæŒ‡ä»¤æŸ¥åˆ°ç·¨è™Ÿæ˜¯1çš„å¯«éŒ¯
        è¼¸å…¥atrm 1 å°±å¯ä»¥åˆªé™¤
:::


---

:::info
**B. ç³»çµ±é–‹æ©Ÿçš„é€šçŸ¥è¨Šæ¯ï¼š**
:::

    â— ç³»çµ±é–‹æ©Ÿä¹‹å¾Œï¼Œæœƒè‡ªå‹•å¯„å‡ºä¸€å° email çµ¦ rootï¼Œèªªæ˜ç³»çµ±é–‹æ©Ÿäº†ã€‚
    â—  æŒ‡ä»¤å¯ä»¥æ˜¯ã€ echo "reboot new" | mail -s 'reboot message' root ã€
    â— è«‹æ³¨æ„ï¼Œé€™å€‹å‹•ä½œå¿…é ˆæ˜¯ç³»çµ±ã€è‡ªå‹•æ–¼é–‹æ©Ÿå®Œæˆå¾Œå°±å‹•ä½œã€ï¼Œè€Œä¸éœ€è¦ä½¿ç”¨è€…æˆ–ç®¡ç†å“¡ç™»å…¥å–”ï¼(hint: rc.local)
    
### **è§£ç­”**

:::spoiler


    
    ç¬¬ä¸€æ­¥é©Ÿ ç·¨è¼¯é–‹æ©Ÿå‰æœƒåŸ·è¡Œçš„æª”æ¡ˆ
    
        vim /etc/rc.d/rc.local
        
    ç¬¬äºŒæ­¥é©Ÿ æ’°å¯«ä»¥ä¸ŠæŒ‡ä»¤
    
        echo "reboot new" | mail -s 'reboot message' root
        :wqå­˜æª”é›¢é–‹
        
    ç¬¬ä¸‰æ­¥é©Ÿ æ›´æ”¹æ¬Šé™
    
        chmod 744 /etc/rc.d/rc.local

:::

---

:::info
**C. ç‚ºäº†æ–¹ä¾¿å¤§å®¶ä½¿ç”¨ ps å¤–å¸¶çš„åƒæ•¸ä¾†æŸ¥è©¢ç³»çµ±çš„ç¨‹åºï¼Œå› æ­¤ç®¡ç†å“¡å»ºç«‹ä¸€éš»åç‚º /usr/local/bin/myprocess çš„è…³æœ¬è®“å¤§å®¶æ–¹ä¾¿ä½¿ç”¨ï¼Œè…³æœ¬å…§å®¹ä¸»è¦ç‚ºï¼š**
:::

    â— ç¬¬ä¸€è¡Œä¸€å®šè¦å®£å‘Š shell ç‚º bash æ‰è¡Œï¼›
    â— ä¸»è¦åƒ…åŸ·è¡Œã€ /bin/ps -Ao pid,user,cpu,tty,args ã€
    â— é€™éš»è…³æœ¬å¿…é ˆè¦è®“æ‰€æœ‰äººéƒ½å¯ä»¥åŸ·è¡Œæ‰è¡Œï¼
    
### **è§£ç­”**

:::spoiler
 
    ç¬¬ä¸€æ­¥é©Ÿ ç·¨è¼¯è…³æœ¬
        
        vim /usr/local/bin/myprocess.sh
        
    ç¬¬äºŒæ­¥é©Ÿ æ’°å¯«è…³æœ¬
    
        #!/bin/bash

	    /bin/ps -Ao pid,user,cpu,tty,args
        :wqå­˜æª”é›¢é–‹
    
    ç¬¬ä¸‰æ­¥é©Ÿ å°‡è…³æœ¬çµ¦äºˆXæ¬Šé™
    
        chmod a+x /usr/local/bin/myprocess.sh
        
    ç¬¬å››æ­¥é©Ÿ å°‡è…³æœ¬åŸ·è¡Œ
    
        sh /usr/local/bin/myprocess.sh
:::

---

:::info
**D. å¯«ä¸€éš»åç‚º /usr/local/bin/myans.sh çš„è…³æœ¬ï¼Œé€™éš»è…³æœ¬çš„åŸ·è¡Œçµæœæœƒé€™æ¨£ï¼š**
:::

    â— è…³æœ¬å…§ç¬¬ä¸€è¡Œä¸€å®šè¦å®£å‘Š shell ç‚º bash
    â— ç•¶åŸ·è¡Œ myans.sh true æ™‚ï¼Œè¢å¹•æœƒè¼¸å‡ºã€ Answer is true ã€ï¼Œä¸”è¨Šæ¯ç‚ºé è¨­çš„ Standard output
    â— ç•¶åŸ·è¡Œ myans.sh false æ™‚ï¼Œè¢å¹•æœƒè¼¸å‡ºã€ Answer is false ã€ï¼Œä¸”è¨Šæ¯è¼¸å‡ºåˆ° starndard error output
    â— ç•¶å¤–å¸¶åƒæ•¸ä¸æ˜¯ true ä¹Ÿä¸æ˜¯ false æ™‚ï¼Œè¢å¹•æœƒè¼¸å‡ºã€ Usage: myans.sh true|false ã€
    â— é€™éš»è…³æœ¬å¿…é ˆè¦è®“æ‰€æœ‰äººéƒ½å¯ä»¥åŸ·è¡Œæ‰è¡Œï¼
    
### **è§£ç­”**

:::spoiler

    ç¬¬ä¸€æ­¥é©Ÿ ç·¨è¼¯è…³æœ¬
        
        vim /usr/local/bin/myans.sh
        
    ç¬¬äºŒæ­¥é©Ÿ æ’°å¯«è…³æœ¬
    
        #!/bin/bash
        
        case ${1} in
        
        "true" )
                echo "Answer is true"
                ;;
        "false" )
                echo "Answer is false" 1>&2
                ;;
        *)
                echo "Usage: myans.sh true|false"
                ;;
        esac
    
     ç¬¬ä¸‰æ­¥é©Ÿ å°‡è…³æœ¬çµ¦äºˆXæ¬Šé™

        chmod a+x /usr/local/bin/myans.sh
    
    ç¬¬å››æ­¥é©Ÿ å°‡è…³æœ¬åŸ·è¡Œ

        sh /usr/local/bin/myans.sh  true
        å‡ºç¾ Answer is true å°çš„

        sh /usr/local/bin/myans.sh  false
        å‡ºç¾ Answer is false å°çš„

        sh /usr/local/bin/myans.sh
        å‡ºç¾Usage: myans.sh true|falseå°çš„

:::

---

### **äº”ã€åŸºç¤æª”æ¡ˆç®¡ç†èˆ‡æª”æ¡ˆç³»çµ±ç¶­è­·ï¼š**

:::danger
**A. æ‰“åŒ…æª”æ¡ˆçš„æ ¼å¼éŒ¯èª¤å•é¡Œï¼š**
:::

    â— ä½ çš„ç³»çµ±ä¸­æœ‰å€‹æª”å /root/mybackup çš„æª”æ¡ˆï¼Œé€™å€‹æª”æ¡ˆåŸæœ¬æ˜¯å‚™ä»½ç³»çµ±çš„è³‡æ–™ï¼Œä½†å‰¯æª”åä¸å°å¿ƒå¯«éŒ¯äº†ï¼
    â— è«‹å°‡é€™å€‹æª”æ¡ˆä¿®è¨‚æˆç‚ºæ¯”è¼ƒæ­£ç¢ºçš„å‰¯æª”å (ä¾‹å¦‚ /root/mybackup.txt ä¹‹é¡çš„æ¨¡æ¨£)
    â— ä¸¦ä¸”å°‡è©²æª”æ¡ˆåœ¨ /srv/testing/ ç›®éŒ„ä¸­è§£é–‹é€™å€‹æª”æ¡ˆçš„å…§å®¹ã€‚
    
### **è§£ç­”**

:::spoiler 
    
    ç¬¬ä¸€æ­¥é©Ÿ æŸ¥è©¢æª”æ¡ˆ
    
        ll /root/
        mv /root/mybackup /root/mybackup.tar.xz (å°‡æª”æ¡ˆæ›´æ”¹æ‰¿xzå£“ç¸®æª”)
        
    ç¬¬äºŒæ­¥é©Ÿ å»ºç«‹æ‰€éœ€è³‡æ–™å¤¾
        
        mkdir /srv/testing/
    
    ç¬¬ä¸‰æ­¥é©Ÿ è§£å£“ç¸®åˆ°æŒ‡å®šç›®éŒ„
    
        tar  -C  /srv/testing/  -Jxvf  /root/mybackup.tar.xz
        
    ç¬¬å››æ­¥é©Ÿ æŸ¥çœ‹æŒ‡å®šç›®éŒ„
    
        ll /srv/testing

:::

---

:::danger
**B. LVM å½ˆæ€§å®¹é‡è®ŠåŒ–çš„æ•ˆæœï¼š**
:::

    â— ç›®å‰çš„ç³»çµ±ä¸­ï¼Œ /home æ‡‰è©²ä½¿ç”¨çš„æ˜¯ LVM çš„ç¶­è­·æ¨¡å¼ã€‚è«‹æ‰¾å‡º /home æ‰€åœ¨çš„ VG å‰©é¤˜å®¹é‡
    â— å°‡ VG æ‰€æœ‰å‰©é¤˜å®¹é‡é€šé€šæä¾›çµ¦ /home ä½¿ç”¨ï¼Œå› æ­¤æ•´å€‹ /home çš„å®¹é‡å°‡æœƒæ”¾å¤§å¾ˆå¤šã€‚
    â— åœ¨ç›®å‰çš„ç³»çµ±ä¸­ï¼Œæ›è¼‰åœ¨ /home çš„LVMæ ¼å¼è³‡æ–™ï¼Œè«‹å°‡å®ƒçš„å®¹é‡è®Šæˆ
    â— ä¸”é€™å€‹ç›®éŒ„å…§çš„è³‡æ–™ä¸¦ä¸æœƒæ¶ˆå¤±(ç„¡é ˆé‡æ–°æ ¼å¼åŒ–çš„æ„æ€)ã€‚
    
### **è§£ç­”**

:::spoiler



    ç¬¬ä¸€æ­¥é©Ÿ æŸ¥çœ‹LVMå‰©ä¸‹å¤šå°‘å®¹é‡
        
        lvscan  (çœ‹/dev/centos/home)
        vgdisplay centos(çœ‹Freeå®¹é‡å¤šå°‘)
        
    ç¬¬äºŒæ­¥é©Ÿ
    
        lvresize  -l  +1280 /dev/centos/home (å¢åŠ å®¹é‡)
        df -Th /home (å°šæœªæ›´æ”¹å®¹é‡)  
        xfs_growfs /home  /*é‡æ–°èª¿æ•´*/
        df -Th /home (æ›´æ”¹å®¹é‡äº†)

:::

---

> [time=Fri, Jun 18, 2021 11:50 PM é™³éµ¬çš“å­¸é•·æ‰€æ’°å¯«]
